<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="style.css">
    <style>
    </style>
</head>
<div class="bungkus">
    <div class="container1">
        <div class="header">
            <p style="font-family:verdana; font-size:40px; text-align:center">AirFeel</p>
            <p style="font-family:verdana; font-size:12px; text-align:justify">The program which is supported by an
                internal research grant from Airlangga University, was initiated by Prisma Megantoro and students of the
                Faculty of Advanced Technology and Multidisciplinary.</p>
            <img src="img/IMG_20201022_122423.jpg" alt="" style="width:180px;height:120px;">
            <img src="img/IMG_20200917_150648.jpg" alt="" style="width:180px;height:100px;">
            <p style="font-family:verdana; font-size:20px;"> </p>
            <img src="img/IconSTMM_warnaSimple.png" alt="" style="width:220px;height:45px;">
            <span id="tgl" style="font-family:verdana; font-size:16px; text-align:justify">none</span>
            <span id="wkt" style="font-family:verdana; font-size:16px; text-align:justify"> none</span>
        </div>
    </div>
    <div class="container">
        <div class="header">
            <img src="img/cuaca.PNG" alt="">
            <span>
                <style="font-family:impact">Weather Parameters
            </span>
        </div>
        <div class="item">
            <div class="item-title">UV index </div>
            <span id="uv-index" class="value-item">none</span>
        </div>
        <div class="item">
            <div class="item-title">Bar. Pressure </div>
            <span id="bar-pressure" class="value-item">none</span>
            <span class="item-unit">hPa</span>
        </div>
        <div class="item">
            <div class="item-title">Rainfall</div>
            <span id="rainfall" class="value-item">none</span>
            <span class="item-unit">mm/hour</span>
        </div>
        <div class="item">
            <div class="item-title">Temperature </div>
            <span id="temperature" class="value-item">none</span>
            <div> </div>
            <span class="item-unit">&#8451;</span>
        </div>
        <div class="item">
            <div class="item-title">Humidity</div>
            <span id="humidity" class="value-item">none</span>
            <div> </div>
            <span class="item-unit">%</span>
        </div>
        <div class="item">
            <div class="item-title">Wind</div>
            <span id="wind-direction" class="value-item2">none</span>
            <span class="value-item2">&#176;</span>
            <span class="item-unit"> N</span>
            <div> </div>
            <span id="wind-speed" class="value-item2">none</span>
            <span class="item-unit">mph</span>
        </div>
    </div>
    <div class="container">
        <div class="header">
            <img src="img/air.PNG" alt="">
            <span>
                <style="font-family:impact">Air Quality Parameters
            </span>
        </div>
        <div class="item">
            <div class="item-title bt-blue">Methane</div>
            <span id="methane" class="value-item">none</span>
            <span class="item-unit">ppm</span>
        </div>
        <div class="item">
            <div class="item-title bt-blue">Ammonia</div>
            <span id="ammonia" class="value-item">none</span>
            <span class="item-unit">ppm</span>
        </div>
        <div class="item">
            <div class="item-title bt-blue">CO</div>
            <span id="co" class="value-item">none</span>
            <span class="item-unit">ppm</span>
        </div>
        <div class="item">
            <div class="item-title bt-blue">Ozone</div>
            <span id="ozone" class="value-item">none</span>
            <div> </div>
            <span class="item-unit">x 10<sup>-3</sup></span>
            <span class="item-unit">ppm</span>
        </div>
        <div class="item">
            <div class="item-title bt-blue">CO2</div>
            <span id="co2" class="value-item">none</span>
            <div> </div>
            <span class="item-unit">x 10<sup>3</sup></span>
            <span class="item-unit">ppm</span>
        </div>
        <div class="item">
            <div class="item-title bt-blue">Hydrogen</div>
            <span id="hydrogen" class="value-item">none</span>
            <span class="item-unit">ppm</span>
        </div>
    </div>
</div>

<script>

    setInterval(
        function () {
            fetch('https://coba-esp32-analog.firebaseio.com/rest/saving-data/fireblog/dataStr.json?print=pretty')
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    data = data.split(",");
                    let UV_index= document.getElementById("uv-index");
                    let bar_pressure = document.getElementById("bar-pressure")
                    let Rainfall = document.getElementById("rainfall")
                    let Temperature = document.getElementById("temperature")
                    let Humidity = document.getElementById("humidity")
                    let wind_Direction = document.getElementById("wind-direction")
                    let wind_Speed = document.getElementById("wind-speed")
                    let Methane = document.getElementById("methane")
                    let Ammonia = document.getElementById("ammonia")
                    let co = document.getElementById("co")
                    let Ozone = document.getElementById("ozone")
                    let Co2 = document.getElementById("co2")
                    let Hydrogen = document.getElementById("hydrogen")
					
					let tgl = document.getElementById("tgl")
					let wkt = document.getElementById("wkt")
                    // console.log(data);
                    UV_index.innerHTML = data[4];
                    bar_pressure.innerHTML = data[13];
                    Rainfall.innerHTML = data[10];
                    Temperature.innerHTML = data[11];
                    Humidity.innerHTML = data[12];
                    wind_Direction.innerHTML = data[8];
                    wind_Speed.innerHTML = data[9];
                    Methane.innerHTML = data[7];
                    let _amonia =  (1000 * 4096 * 0.66 / parseFloat(data[1]))-1000;
                    _amonia = _amonia / 721;
                    _amonia = Math.pow(_amonia , -2.189) * 101.37;
                    _amonia = Math.round(_amonia * 100) / 10
                    Ammonia.innerHTML = _amonia;
                    let _co =  (1000 * 4096 * 1.51 / parseFloat(data[6]))-1000;
                    _co = _co / 790;
                    _co = Math.pow(_co , -2.056) * 603.59;
                    _co = Math.round(_co * 100) / 10
                    co.innerHTML = _co;
                    let _ozone =  (1000 * 4096 * 1.151 / parseFloat(data[2]))-1000;
                    _ozone = _ozone / 12.7;
                    _ozone = Math.pow((_ozone , -2.445) *20.34)*1000;
                    _ozone = Math.round(_ozone * 100) / 10
                    Ozone.innerHTML = _ozone;
                    Co2.innerHTML = data[6];
                    let _hydrogen =  (1000 * 4096 * 1.151 / parseFloat(data[3]))-1000;
                    _hydrogen = _hydrogen / 3.4;
                    _hydrogen = Math.pow(_hydrogen , -0.681) * 995.95;
                    _hydrogen = Math.round(_hydrogen * 100) / 10
                    Hydrogen.innerHTML = _hydrogen;
                    
					
					tgl.innerHTML = data[14];
					wkt.innerHTML = data[15];
                })
        }, 1000
    )


</script>

</body>

</html>